(window.webpackJsonpwebapp=window.webpackJsonpwebapp||[]).push([[0],{20:function(e,a,t){e.exports=t(51)},25:function(e,a,t){},51:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(17),l=t.n(s),c=(t(25),t(1)),o=t(2),i=t(4),m=t(3),d=t(5),u={add:"+","add-application":"Add application",applications:"Applications",board:"Board",boards:"Boards",build:"Let's go!","choose-applications":"Choose the Pre-installed Applications","choose-applications-desc":"Select the applications that will be pre-installed on the device. For Ubuntu Core this will be snaps, for Ubuntu Classic it will be snaps or packages.","choose-board":"Choose Board","choose-board-desc":"Select the board for your device","choose-os":"Choose the Operating System","choose-os-desc":"Select the version of Ubuntu to install on the device",classic:"Classic",confirm:"Confirm","confirm-configuration":"Confirm board configuration",core:"Core","find-snaps":"Find snaps to install",home:"Home",os:"Operating System","pre-installed-snaps":"Pre-installed snaps","ready-to-build":"Ready to build the Ubuntu image?",remove:"X","remove-application":"Remove application","site-description":"Choose your board. Select the Operating System. Pick your pre-installed applications. Let's go!","search-store":"enter snap name","snap-store":"Snap Store",subtitle:"image building service for IoT devices",title:"Ubuntu Image Builder"};function p(e){return u[e]||e}function h(){var e=localStorage.getItem("board");return JSON.parse(e)}var b=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{id:"navigation",class:"p-navigation header-slim"},r.a.createElement("div",{className:"p-navigation__banner"},r.a.createElement("div",{className:"p-navigation__logo"},r.a.createElement("div",{className:"u-vertically-center"},r.a.createElement("img",{src:"/static/images/logo.png",width:"100px"})))),r.a.createElement("nav",{className:"p-navigation__nav"},r.a.createElement("ul",{className:"p-navigation__links",role:"menu"},r.a.createElement("li",{className:"p-navigation__link",role:"menuitem"},r.a.createElement("a",{href:"/"},"Home")))))}}]),a}(n.Component),g=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"p-strip--image is-dark header"},r.a.createElement(b,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:"/static/images/ubuntu.png",alt:"ubuntu"})),r.a.createElement("div",{className:"col-5 title"},r.a.createElement("h1",null,p("title")),r.a.createElement("p",null,p("subtitle")))))}}]),a}(n.Component),f=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={token:e.token||{}},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("section",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("br",null),r.a.createElement("div",{className:"p-card"},p("site-description")),r.a.createElement("div",null,r.a.createElement("a",{className:"p-button--brand",href:"/boards",alt:""},p("choose-board")," \xbb")))))}}]),a}(n.Component),v=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).handleClick=function(e){console.log("---",e.target.getAttribute("data-key")),window.location.href="/boards/"+e.target.getAttribute("data-key")},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderBoards",value:function(){var e=this;if(this.props.boards)return this.props.boards.map(function(a){var t={backgroundImage:"url(".concat("/static/images/"+a.id+".png",")")};return r.a.createElement("div",{className:"board",style:t,onClick:e.handleClick,"data-key":a.id},r.a.createElement("div",{"data-key":a.id},r.a.createElement("h3",{"data-key":a.id},a.name)))})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",{className:"p-breadcrumbs"},r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/"},p("home"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},p("boards")))),r.a.createElement("h2",null,p("choose-board")),r.a.createElement("p",null,p("choose-board-desc")),this.renderBoards())}}]),a}(n.Component),E=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).handleClick=function(e){window.location.href="/boards/"+t.props.board.id+"/"+e.target.getAttribute("data-key")},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderOS",value:function(){var e=this;return this.props.board.os.map(function(a){var t=a.type+a.version;return r.a.createElement("div",{className:"os",key:t,"data-key":t,onClick:e.handleClick},r.a.createElement("img",{src:"/static/images/ubuntu.png",alt:"Ubuntu","data-key":t}),r.a.createElement("h4",{"data-key":t},p(a.type)),r.a.createElement("p",{"data-key":t},p(a.version)))})}},{key:"render",value:function(){var e="/static/images/"+this.props.board.id+".png";return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",{className:"p-breadcrumbs"},r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/"},p("home"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"},p("board"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},p("os")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:e,alt:this.props.board.name,width:"100px"})),r.a.createElement("div",{className:"col-5 u-align--bottom"},r.a.createElement("h4",null,this.props.board.name))),r.a.createElement("h2",null,p("choose-os")),r.a.createElement("p",null,p("choose-os-desc")),this.renderOS())}}]),a}(n.Component),N=t(7),y=t.n(N),k="/v1/";var C={baseUrl:window.location.protocol+"//"+window.location.hostname+":"+window.location.port+k,LoadingImage:"/static/images/ajax-loader.gif"},O={boardsList:function(e,a){return y.a.get(C.baseUrl+"boards")},storeSearch:function(e,a){return y.a.get(C.baseUrl+"store/snaps/"+e)}},S=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).pageUp=function(){var e=t.calculatePages(),a=t.state.page+1;a>e&&(a=e),t.setState({page:a}),t.signalPageChange(a)},t.pageDown=function(){var e=t.state.page-1;e<=0&&(e=1),t.setState({page:e}),t.signalPageChange(e)},t.state={page:1,query:null,maxRecords:5|e.pageSize},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"signalPageChange",value:function(e){var a=(e-1)*this.state.maxRecords;this.props.pageChange(a,a+this.state.maxRecords)}},{key:"calculatePages",value:function(){var e=this.props.displayRows.length,a=parseInt(e/this.state.maxRecords,10);return e%this.state.maxRecords>0&&(a+=1),a}},{key:"renderPaging",value:function(){var e=this.calculatePages();return e>1?r.a.createElement("div",{className:"u-float--right spacer"},r.a.createElement("button",{className:"p-button--neutral small",href:"",onClick:this.pageDown},"\xab"),r.a.createElement("span",null,"\xa0",this.state.page," of ",e,"\xa0"),r.a.createElement("button",{className:"p-button--neutral small",href:"",onClick:this.pageUp},"\xbb")):r.a.createElement("div",{className:"u-float--right"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-12"},this.renderPaging())}}]),a}(n.Component),_=t(18),w=t.n(_),j=5,x=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).handleClear=function(e){t.setState({snaps:[]})},t.handleSearchChange=function(e){e.preventDefault(),t.setState({snapName:e.target.value})},t.handleKeyPress=function(e){"Enter"===e.key&&t.handleSearchStore(e)},t.handleSearchStore=function(e){e.preventDefault(),t.searchStore()},t.handleInstall=function(e){e.preventDefault();var a=e.target.getAttribute("data-key");t.props.handleInstallClick(a)},t.handleRecordsForPage=function(e,a){t.setState({startRow:e,endRow:a})},t.state={snapName:"",snaps:[],loadingSearch:!1,page:1,startRow:0,endRow:j},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"searchStore",value:function(){var e=this;0!==this.state.snapName.length&&(this.setState({loadingSearch:!0}),O.storeSearch(this.state.snapName).then(function(a){a.data._embedded&&a.data._embedded["clickindex:package"]&&e.setState({snaps:a.data._embedded["clickindex:package"],loadingSearch:!1,message:null,messageType:null})}))}},{key:"renderSnaps",value:function(e){var a=this;return e.length>0?r.a.createElement("div",null,r.a.createElement("p",null,e.length," snaps found"),r.a.createElement("table",null,r.a.createElement("tbody",null,e.slice(this.state.startRow,this.state.endRow).map(function(e){return r.a.createElement("tr",{key:e.snap_id,title:e.description},r.a.createElement("td",{className:"small"},r.a.createElement("button",{"data-key":e.package_name,className:"p-button--neutral small",title:p("add-application"),onClick:a.handleInstall},p("add"))),r.a.createElement("td",{className:"overflow"},r.a.createElement("b",null,e.package_name)," ",e.version),r.a.createElement("td",{className:"overflow"},e.developer_name," (",w()(e.binary_filesize),")"))})))):r.a.createElement("div",null,"No snaps found.")}},{key:"render",value:function(){var e=this.state.snaps;return this.props.message?r.a.createElement("div",{className:"p-card col-6"},r.a.createElement("h3",{className:"p-card__title"},p("snap-store")),r.a.createElement("p",null,this.state.loadingSearch?r.a.createElement("img",{src:C.LoadingImage,alt:p("loading")}):"",this.props.message),r.a.createElement("p",null,r.a.createElement("form",{className:"p-search-box"},r.a.createElement("input",{className:"p-search-box__input",type:"search",name:"snapname",onKeyPress:this.handleKeyPress,onChange:this.handleSearchChange,placeholder:p("search-store")}),r.a.createElement("button",{type:"reset",className:"p-search-box__reset",alt:"reset",disabled:"",onClick:this.handleClear},r.a.createElement("i",{className:"p-icon--close"})),r.a.createElement("button",{type:"submit",onClick:this.handleSearchStore,className:"p-search-box__button",alt:"search"},r.a.createElement("i",{className:"p-icon--search"})))),r.a.createElement(S,{displayRows:e,pageSize:j,pageChange:this.handleRecordsForPage}),this.renderSnaps(e)):r.a.createElement("span",null)}}]),a}(n.Component),I=function(e){function a(e){var t;Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).handleSnapInstall=function(e){if(!(t.state.snaps.indexOf(e)>=0)){var a=t.state.snaps;a.push(e),t.setState({snaps:a})}},t.handleSnapOnChange=function(e){e.preventDefault(),t.setState({snapName:e.target.value})},t.handleDialogCancel=function(e){e.preventDefault()},t.handleRemove=function(e){e.preventDefault();var a=e.target.getAttribute("data-key"),n=t.state.snaps.filter(function(e){return e!==a});t.setState({snaps:n})},t.handleConfirm=function(e){e.preventDefault(),function(e){var a=JSON.stringify(e);localStorage.setItem("board",a)}({board:t.props.board,os:t.props.os,snaps:t.state.snaps}),window.location.href="/confirm"},t.state={snaps:[]};var n=h();return n&&n.snaps&&n.snaps.length>0&&(t.state.snaps=n.snaps),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderSelected",value:function(){var e="/static/images/"+this.props.board.id+".png";return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:e,alt:this.props.board.name,width:"100px"})),r.a.createElement("div",{className:"col-5 u-align--bottom"},r.a.createElement("h4",null,this.props.board.name),r.a.createElement("p",null,"Ubuntu ",p(this.props.os.type)," ",this.props.os.version)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",{className:"p-breadcrumbs"},r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/"},p("home"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"},p("board"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"+this.props.board.id},p("os"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},p("applications")))),this.renderSelected(),r.a.createElement("h2",null,p("choose-applications")),r.a.createElement("p",null,p("choose-applications-desc")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"p-card col-4"},r.a.createElement("p",null,p("pre-installed-snaps")),r.a.createElement("ul",{className:"p-list"},this.state.snaps.map(function(a){return r.a.createElement("li",{className:"p-list__item"},r.a.createElement("button",{"data-key":a,className:"p-button--neutral small",title:p("remove-application"),onClick:e.handleRemove},p("remove")),"\xa0 ",a)}))),r.a.createElement(x,{message:p("find-snaps"),handleTextChange:this.handleSnapOnChange,handleInstallClick:this.handleSnapInstall,handleCancelClick:this.handleDialogCancel})),r.a.createElement("div",null,r.a.createElement("button",{className:"p-button--brand",onClick:this.handleConfirm},p("confirm"))))}}]),a}(n.Component),R=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).handleBuild=function(e){setTimeout(function(){var e=["ogra","ondra","alfonso","konrad"],a=e[Math.floor(Math.random()*e.length)];t.setState({messages:["Waking trained chef... "+a]})},1e3),setTimeout(function(){var e=t.state.messages;e.push("Cranking the build machine..."),t.setState({messages:e})},2e3),setTimeout(function(){var e=t.state.messages;e.push("This is just a demo, but you get the idea"),t.setState({messages:e})},3e3)},t.state={messages:[]},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"renderSelected",value:function(){var e="/static/images/"+this.props.board.board.id+".png";return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{src:e,alt:this.props.board.board.name,width:"100px"})),r.a.createElement("div",{className:"col-5 u-align--bottom"},r.a.createElement("h4",null,this.props.board.board.name),r.a.createElement("p",null,"Ubuntu ",p(this.props.board.os.type)," ",this.props.board.os.version),r.a.createElement("p",null,1!==this.props.board.snaps.length?this.props.board.snaps.length+" snaps":"1 snap")))}},{key:"renderConsole",value:function(){if(0!==this.state.messages.length)return r.a.createElement("pre",{className:"console"},this.state.messages.map(function(e){return e+"\n"}))}},{key:"render",value:function(){var e=this.props.board;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",{className:"p-breadcrumbs"},r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/"},p("home"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"},p("board"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"+e.board.id},p("os"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},r.a.createElement("a",{href:"/boards/"+e.board.id+"/"+e.os.type+e.os.version},p("applications"))),r.a.createElement("li",{className:"p-breadcrumbs__item"},p("confirm")))),this.renderSelected(),r.a.createElement("h2",null,p("confirm-configuration")),r.a.createElement("div",{className:"row"},r.a.createElement("pre",null,r.a.createElement("code",null,"board:","\n","  name: ",e.board.name,"\n","  os:","\n","    type: ",e.os.type,"\n","    version: ",e.os.version,"\n","  snaps:","\n",e.snaps.map(function(e){return"    "+e+"\n"})))),r.a.createElement("div",null,r.a.createElement("h3",null,p("ready-to-build")),r.a.createElement("button",{className:"p-button--brand",onClick:this.handleBuild},p("build"))),r.a.createElement("div",{className:"row"},this.renderConsole()))}}]),a}(n.Component),P=t(19),B=t.n(P)()(),U=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={location:B.location,token:e.token||{},boards:[]},t.getBoards(),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"getBoards",value:function(){var e=this;O.boardsList().then(function(a){e.setState({boards:a.data.boards})})}},{key:"renderBoards",value:function(e,a){if(!e)return r.a.createElement(v,{boards:this.state.boards});var t=this.state.boards.filter(function(a){return a.id===e});if(0!==t.length){if(!a)return r.a.createElement(E,{board:t[0]});var n=t[0].os.filter(function(e){return e.id===a});if(0!==n.length)return r.a.createElement(I,{board:t[0],os:n[0]})}}},{key:"renderConfirm",value:function(e,a){var t=h();return r.a.createElement(R,{board:t})}},{key:"render",value:function(){var e=function(){var e=window.location.pathname.split("/");switch(e.length){case 2:return{section:e[1]};case 3:return{section:e[1],sectionId:e[2]};case 4:return{section:e[1],sectionId:e[2],subsection:e[3]};default:return{}}}();return console.log(e),r.a.createElement("div",{className:"App"},""===e.section?r.a.createElement(g,null):"",""!==e.section?r.a.createElement(b,null):"",r.a.createElement("div",{className:"content row"},""===e.section?r.a.createElement(f,null):"","boards"===e.section?this.renderBoards(e.sectionId,e.subsection):"","confirm"===e.section?this.renderConfirm(e.sectionId,e.subsection):""))}}]),a}(n.Component);l.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.592becd7.chunk.js.map